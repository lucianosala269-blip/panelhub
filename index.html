<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Juego Pro ðŸ’°ðŸ”¥</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial;
  background: linear-gradient(180deg, #141e30, #243b55);
}

#player {
  width: 70px;
  height: 70px;
  background: lime;
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 15px;
}

.item {
  width: 40px;
  height: 40px;
  position: absolute;
  top: 0;
  border-radius: 50%;
}

.coin {
  background: gold;
}

.bomb {
  background: red;
}

#score, #level {
  position: absolute;
  top: 10px;
  font-size: 22px;
  color: white;
}

#score { left: 10px; }
#level { right: 10px; }
</style>
</head>

<body>

<div id="score">Puntos: 0</div>
<div id="level">Nivel: 1</div>
<div id="player"></div>

<!-- sonidos -->
<audio id="coinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-coin-win-1998.mp3"></audio>
<audio id="boomSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-explosion-2759.mp3"></audio>

<script>
let player = document.getElementById("player");
let score = 0;
let speed = 3;
let level = 1;

const coinSound = document.getElementById("coinSound");
const boomSound = document.getElementById("boomSound");

// mover jugador
document.addEventListener("mousemove", e => {
  player.style.left = e.clientX - 35 + "px";
});

function createItem() {
  let item = document.createElement("div");
  item.classList.add("item");

  let isBomb = Math.random() < 0.3 + level * 0.05;

  if (isBomb) {
    item.classList.add("bomb");
  } else {
    item.classList.add("coin");
  }

  item.style.left = Math.random() * window.innerWidth + "px";
  document.body.appendChild(item);

  let fall = setInterval(() => {
    let top = parseInt(item.style.top || 0);
    item.style.top = top + speed + "px";

    let playerRect = player.getBoundingClientRect();
    let itemRect = item.getBoundingClientRect();

    if (
      itemRect.bottom > playerRect.top &&
      itemRect.left < playerRect.right &&
      itemRect.right > playerRect.left
    ) {
      if (item.classList.contains("coin")) {
        score++;
        coinSound.play();
      } else {
        boomSound.play();
        setTimeout(() => {
          alert("ðŸ’£ Perdiste! Nivel: " + level + " | Puntos: " + score);
          location.reload();
        }, 200);
      }

      document.getElementById("score").textContent = "Puntos: " + score;
      item.remove();
      clearInterval(fall);
    }

    if (top > window.innerHeight) {
      item.remove();
      clearInterval(fall);
    }

  }, 20);
}

// niveles
function updateLevel() {
  let newLevel = Math.floor(score / 5) + 1;

  if (newLevel !== level) {
    level = newLevel;
    speed += 1;
    document.getElementById("level").textContent = "Nivel: " + level;

    alert("ðŸ”¥ Subiste a nivel " + level);
  }
}

setInterval(() => {
  createItem();
  updateLevel();
}, 900);
</script>

</body>
</html>
